ğŸ” SÃ©curitÃ© dans Angular â€” Guide pratique
1. ğŸ¯ Introduction
Jâ€™ai crÃ©Ã© un projet Angular avec la commande suivante :

ng new app-Angular
Ensuite, jâ€™ai mis en place une configuration de sÃ©curitÃ© complÃ¨te en suivant les Ã©tapes ci-dessous.

2. ğŸ“¦ Installation du module de sÃ©curitÃ©
Jâ€™ai installÃ© un module permettant de gÃ©rer lâ€™authentification basÃ©e sur JWT (JSON Web Token) :

npm install @auth0/angular-jwt
âœ… Alternative : angular-oauth2-oidc si tu utilises OAuth2/OpenID Connect.

3. ğŸ› ï¸ CrÃ©ation du service dâ€™authentification
GÃ©nÃ©ration du service :

bash
Copier
Modifier
ng generate service auth
Le service AuthService contient les responsabilitÃ©s suivantes :

ğŸ”‘ Connexion (login)
Envoie dâ€™une requÃªte HTTP POST avec les identifiants de lâ€™utilisateur vers lâ€™API.

RÃ©cupÃ©ration du token JWT en cas de succÃ¨s.

Stockage sÃ©curisÃ© du token dans le localStorage.

ğŸ”“ DÃ©connexion (logout)
Suppression du token du localStorage.

Redirection automatique vers la page de connexion.

ğŸ” VÃ©rification d'authentification
MÃ©thode isAuthenticated() qui vÃ©rifie la prÃ©sence et la validitÃ© du token.

ğŸ‘¤ RÃ©cupÃ©ration des infos utilisateur
DÃ©codage du token JWT pour obtenir des donnÃ©es comme le nom, lâ€™e-mail ou les rÃ´les.

ğŸ”„ Gestion automatique du token
Le service est conÃ§u pour fonctionner avec un intercepteur HTTP, qui injecte automatiquement le token dans toutes les requÃªtes sÃ©curisÃ©es.

4. ğŸ§© Mise en place dâ€™un intercepteur HTTP
GÃ©nÃ©ration de lâ€™intercepteur :

ng generate interceptor auth
RÃ´le de lâ€™intercepteur :

Intercepter toutes les requÃªtes sortantes.

Ajouter automatiquement lâ€™en-tÃªte Authorization: Bearer <token> si lâ€™utilisateur est connectÃ©.

Agit comme un filtre central de sÃ©curitÃ© entre Angular et lâ€™API.

5. ğŸ” Protection des routes avec canActivate
Utilisation du guard canActivate pour sÃ©curiser certaines routes (ex : dashboard, profil...) en vÃ©rifiant que lâ€™utilisateur est authentifiÃ©.

{
  path: 'profile',
  component: ProfileComponent,
  canActivate: [AuthGuard]
}
6. ğŸ§ª API de test utilisÃ©e
Jâ€™ai utilisÃ© lâ€™API de test suivante pour valider lâ€™implÃ©mentation :

ruby

https://fakeapi.platzi.com/en/rest/auth-jwt/
Elle permet dâ€™effectuer des tests de login et de rÃ©cupÃ©ration de profil utilisateur via JWT.

âœ… RÃ©sultat
Ã€ la fin de cette configuration :

Lâ€™utilisateur peut se connecter et recevoir un token JWT.

Le token est stockÃ© en local.

Les requÃªtes HTTP vers lâ€™API sont automatiquement sÃ©curisÃ©es.

Les routes sensibles sont protÃ©gÃ©es.

Lâ€™interface sâ€™adapte dynamiquement selon lâ€™Ã©tat de connexion.